---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: root
  annotations:
    traefik.ingress.kubernetes.io/router.middlewares: prod-root-redirect@kubernetescrd
spec:
  tls:
  - secretName: root-certs
    hosts:
    - kotimme.cc
  rules:
  - host: kotimme.cc
#    http:
#      paths:
#      - path: /
#        pathType: Prefix
#        backend:
#          service:
#            name: grav
#            port:
#              name: grav
---
# Redirect with domain replacement
apiVersion: traefik.io/v1alpha1
kind: Middleware
metadata:
  name: root-redirect
spec:
  redirectRegex:
    regex: ^https://kotimme.cc/(.*)
    replacement: https://wiki.kotimme.cc/${1}
